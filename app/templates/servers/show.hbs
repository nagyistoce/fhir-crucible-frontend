
<div class="container main">
  {{url}}
  <div class="row content">
    <div class="col-md-12">
      <div class="palette report">
        <div class="row">
          <div class="col-md-10">
            <h2>Review Conformance and Select Tests</h2>
          </div>
          <div class="col-md-2">
            <button type="submit" class="btn orange_btn" {{action "executeTests"}}>RUN</button>
          </div>
        </div>
        <p class="helper_text">Each FHIR Interface will first generate a conformance statement. Based on the conformance, a given set of recommended tests will be shown to the user.</p>
        {{#if runningTestCount}}
          <div class="row">
            <div class="progress">
              <div {{bind-attr class=":progress-bar :progress-bar-striped :active"}} role="progressbar" {{bind-attr aria-valuenow=executionProgress}} aria-valuemin="0" aria-valuemax="100" {{bind-attr style=progressStyle}}>
                <span class="sr-only">{{executionProgress}}% Complete</span>
              </div>
            </div>
          </div>
        {{/if}}

        <div class="row">
          <ul class="nav nav-tabs tabbed-data-container">
            <li class="tabbed-data active"><a data-toggle="tab" href="#test-data">Tests</a></li>
            <li class="tabbed-data"><a data-toggle="tab"href="#conformance-data">Conformance</a></li>
            <li class="tabbed-data"><a data-toggle="tab"href="#heatmap-data">Heat Map</a></li>
          </ul>
        </div>


        <div class="row">
          <div class="tab-content">
            <!-- TEST PANEL START -->
            <div class="tab-pane active" id="test-data">
              <div class="col-md-12 tab-content-holder">
                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                  <div class="row">
                    <div class="col-sm-4">
                      <a {{action "selectAll"}}>Select All</a>
                      |
                      <a {{action "selectNone"}}>Select None</a>
                    </div>
                  </div>
                  {{#each tests as |test|}}
                    <div class="toggleable panel-heading">
                      <h4 class="panel-title">
                        <label >
                          {{input type="checkbox" name=test.id checked=test.selected}}
                          {{test.name}}
                        </label>
                        <a class="collapsed" data-toggle="collapse" data-target="#test{{unbound test.reference}}" aria-expanded="false" >
                        <small>(more)</small></a>

                      </h4>
                    </div>
                    <div id="test{{unbound test.reference}}" class="panel-collapse collapse">
                      <div class="panel-body">
                        {{test.description}}<br>
                        <a href="/ctl/{{unbound test.specificTitle}}.xml" download>Test Definition</a>
                      </div>
                    </div>

                  {{/each}}
                </div>
              </div>
            </div>
            <!-- TEST PANEL END -->
            <!-- CONFORMANCE PANEL START -->
            <div class="tab-pane" id="conformance-data">
              {{view 'conformance' contextBinding="server.conformance"}}
            </div>
            <!-- CONFORMANCE PANEL END -->
            <!-- HEATMAP PANEL START -->
            <div class="tab-pane" id="heatmap-data">
              <div class="col-md-12 tab-content-holder">heat</div>
            </div>
            <!-- HEATMAP PANEL END -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
